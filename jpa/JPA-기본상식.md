# JPA를 사용할 때 꼭 알아야하는 것들

### Entity Lifecycle

- New (Transient) : 아직 영속성 컨텍스트에 속하지 않는 새로운 객체 상태
- Managed (Persistent) : 영속성 컨텍스트에 저장된 상태. 모든 변경이 데이터베이스와 동기화 됩니다.
- Detached : 이전에 영속성 컨텍스트에 있었지만 현재는 분리된 상태
- Removed: 영속성 컨텍스트에서 삭제 예정인 상태

### Persistence Context

- 작업 단위마다 Entity Manager를 사용하여 영속성 컨텍스트를 생성하고 관리
- 영속성 컨텍스트 내의 엔터티는 자동으로 데이터베이스와 동기화
- 1차 캐시
    - 영속성 컨텍스트에 포함된 엔터티는 1차 캐시에 저장됨
- Dirty Checking
- 영속성 컨텍스트는 관리 중인 엔터티의 변경사항을 추적, 트랜잭션 커밋 시 변경된 엔터티의 상태가 데이터베이스에 자동으로 반영됨
  엔터티의 동일성 보장
    - 같은 영속성 컨텍스트 내에서는 동일한 데이터베이스 레코드를 참조하는 엔터티가 동일함을 보장함

### Callbacks

- 엔터티의 생명주기 이벤트에 대한 응답으로 동작을 수행하는 메소드

### JPA 엔터티 Equals

- Lazy Loading을 활용할 때 프록시 객체와 실제 엔터티 객체의 차이점을 고려해야 함
- 기본키를 사용한 Equals 메소드 재정의
