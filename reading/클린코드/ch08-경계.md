# 경계

### 외부 코드 사용하기
- 사용자는 자신의 요구사항에 집중하는 인터페이스를 바라고 패키지 제공자나 프레임워크 제공자는 적용성을 최대한 넓히길 바란다.
- 외부 코드가 제공하는 기능성과 유연성은 확실히 유용하지만 그만큼 위험도 크다.
- 외부 코드를 클래스로 감싸면 외부 클래스가 제공하는 넓은 기능을 정책에 맞게 제한할 수 있다.

### 일급 컬렉션
- 책에서 직접적으로 언급되진 않았지만 예제가 일급 컬렉션과 닮아서 정리..
```java
class Sensors {
    private Map sensors = new HashMap();
    
    public Sensor getById(String id) {
        return (Sensor) sensors.get(id);
    }
}
```
- 일급 컬렉션이란 `Collection`을 `Wrapping`하고 그 외 다른 멤버변수가 존재하지 않는 상태를 말한다.
- 일급 컬렉션을 사용하면 상태와 행위를 한 곳에서 관리할 수 있고 `Collection`의 불변성을 보장한다.
- 비지니스에 종속적인 자료구조를 생성할 수 있다. (외부 API를 Wrapping 함으로 설계규칙과 비즈니스 규칙을 따르도록 강제할 수 있음)

### 경계 살피고 익히기
- 외부 코드를 곧바로 사용할 때 버그가 발생하게 되면 버그의 출처를 찾기가 어렵다.
- 외부 코드를 사용할 때 `학습 테스트`를 생성하면 외부 코드의 사용법과 의도를 파악하기 수월해진다

### 학습 테스트는 공짜 이상이다.
- 학습 테스트에 드는 비용은 없다. 어쨌든 사용하는 API를 배워야 하므로 오히려 필요한 지식만 확보하는 손쉬운 방법이다.
- 학습 테스트는 공짜 이상이다. 투자하는 노력보다 얻는 성과가 더 크다.

### 아직 존재하지 않는 코드를 사용하기 (???)
- 아는 코드와 모르는 코드가 있을 때 아는 코드부터 작성하면서 경계에 부딪혀라. (???)
- 통제할 수 없는 코드와 통제할 수 있는 코드를 분리하면 설계가 유연해진다.
- ADAPTER 패턴을 이용하면 스펙이 다르더라도 사용자가 기대하는 인터페이스 형태로 변환시킬 수 있다.

### 정리
- 경께에 위치하는 코드는 깔끔히 분리한다. 또한 기대치를 정의하는 테스트 케이스도 작성한다.
- 통제가 불가능한 외부 패키지에 의존하는 대신 통제가 가능한 우리코드에 의존하는 것이 훨씬 좋다.
- 새로운 클래스로 경계를 감싸거나 ADAPTER 패턴을 사용하여 우리가 원하는 인터페이스를 패키지가 제공하는 인터페이스로 변환하자.

