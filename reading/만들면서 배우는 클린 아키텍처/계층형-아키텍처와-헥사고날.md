# 만들면서 배우는 클린아키텍처 읽고 느낀점 정리 

## 📌 계층형 아키텍처

---

**장점**

- 계층을 잘 이해하고 구성하기만 하면 각 레이어를 독립적인 레이어로 구성할 수 있다.
- 가벼운 일회성 프로젝트(그런게 있을지 모르지만)에서는 오히려 육각형 아키텍처보다 적합하다는 생각이 든다.
- 육각형 아키텍처보다 이해하기 쉬운 구조이다.

**단점**

- 영속성 계층의 컴포넌트에게 강하게 의존하는 느낌이 든다. 의존성 방향이 데이터베이스로 향한다.
    - 의존을 역전시켜서 어느정도 개선이 가능하긴 함
- 계층형 아키텍처 자체로도 견고하고 독립적이지만, 규칙을 강제하지 않기 때문에 아키텍처가 오염될 확률이 높아진다.
- 영속성 계층이 먼저 구현되어야 상위 계층을 구현할 수 있기 때문에 비지니스 로직에 영속성 관점이 섞이기 쉽다.

### ✔️ 규칙을 강제하지 않으면 일어나는 부수효과

---

- 단순한 로직일 경우 도메인 로직을 웹 계층에서 구현하고 싶은 유혹에 빠지게 된다.
- 위와 같은 경우 유스케이스가 확장되면 계층의 책임이 섞이고 도메인 로직이 다른 레이어에 침투하여 흩어질 확률이 높다.
- 계층형 아키텍처는 도메인 서비스의 `너비` 의 범위를 강제하지 않는다. 때문에 여러개의 유스케이스를 감당하는 넓은 서비스가 만들어질 수 있다.
    - 넓은 서비스가 만들어지면 특정 유스케이스가 어느 서비스에 존재하는지 찾기 어려워진다. 아키텍처는 코드를 탐색하는데 도움이 되어야 하는데 이 경우에는 아무런 도움이 되지 않는다.


## 📌 헥사고날 아키텍처

---

**장점**

- 도메인과 유스케이스가 외부로 향하는 의존성이 없기 때문에 외부의 변경으로 부터 도메인과 유스케이스를 지킬 수 있다.
- 도메인 코드가 바깥쪽 코드에 의존하지 않게 함으로써 영속성과 UI에 특화된 모든 문제로부터 도메인로직의 결합을 제거할 수 있다. 그리고 변경할 이유의 수도 줄어든다.
- 도메인 코드는 이제 영속성 레이어에 구애받지 않고 비지니스에 집중하여 모델링 할 수 있게 된다.
- 애플리케이션이 어떤 유스케이스를 보유하고 있는지 한눈에 파악할 수 있다.

**단점**

- 어렵다.
- 계층형 아키텍처는 특별한 이해가 없어도 무리없이 개발할 수 있지만, 핵사고날 아키텍처는 기본 지식이 있어야 이해가 가능해 보인다.