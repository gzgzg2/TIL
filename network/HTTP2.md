# HTTP/2

---

### HTTP/2

HTTP/2의 주요 목적은 전체 요청 및 `응답 다중화`를 활성화 하여 대기 시간을 줄이고 HTTP `헤더 필드의 효율적인 압축`을 통해 프로토콜 오버헤드를 최소화하며 요청 우선 순위 지정 및 `서버 푸시`에 대한 지원을 추가하는 것.

HTTP2는 HTTP 프로토콜의 핵심 개념은 변경되지 않았음 대신 전체 프로세스를 관리하는 클라이언트와 서버 간에 데이터 형식이 프레임으로 지정하고 스트림이라는 연결단위를 통해 헤더 프레임 혹은 본문 프레임을 보낸다. 결과적으로는 기존에 사용하던 HTTP 프로토콜의 버전을 HTTP/2로 변경하여도 애플리케이션은 수정하지 않아도 된다.

기존 HTTP/1.1은 파이프라인을 추가하여 응답을 대기하지 않고 요청을 여러번 보낼 수 있게 되었지만, 응답은 순차적으로 이뤄지기 때문에 후순위 응답은 지연될 수밖에 없다. (네트워크 병목 발생 가능성 높음) 그리고 중복적인 헤더 필드가 매 요청마다 반복될 수 있기 때문에 불필요한 네트워크 트래픽을 유발할 수 있다.

### 바이너리 프레이밍 레이어

HTTP/2의 성능 향상의 핵심은 HTTP 메세지가 캡슐화되고 클라이언트 서버간에 전송되는 방법을 지시하는 새로운 바이너리 프레이밍 계층의 등장 덕이다.

줄바꿈으로 구분된 일반 텍스트 HTTP/1.x 프로토콜과 달리 HTTP/2 통신은 더 작은 메시지가 프레임으로 분할되며 각각은 이진 형식으로 인코딩된다.

이런 특별한 계층이 추가되었기 때문에 클라이언트와 서버 모두 바이너리 인코딩 메커니즘을 사용하여 서로의 메세지를 이해해야 한다. HTTP/1.x 클라이언트는 HTTP/2 전용 서버를 이해하지 못하고 그 반대도 마찬가지이다.

클라이언트와 서버가 바이너리 프레이밍 작업을 수행하기 때문에 응용 프로그램은 이러한 변화를 인식하지 못한다. (신경쓰지 않아도 된다는 얘기)

### 헤더압축

### 응답 다중화(Multiplexing)

### 서버 푸쉬(Server Push)

### HTTP/2 버전 식별

- h2 = TLS 사용하는 HTTP/2
- h2c = TLS 사용하지 않는 HTTP/2 ALPN 프로토콜 식별자로 직렬화 됨