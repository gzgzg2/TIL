# TDD - 1

### The Three Laws of TDD

- 실패하는 코드가 있을 때만 프로덕션 코드를 작성해야 한다.
- 실패하는 테스트 코드가 동작할 만큼만 작성해라
  - 테스트 코드 작성주기와 프로덕션 코드 작성 주기가 너무 길면 좋지않다.
    - 빠른 피드백(테스트 코드)로 프로덕션 코드의 품질을 높이는 게 좋음
- 프로덕션 코드는 실패하는 테스트가 통과할 정도로만 작성하라
  - 실패하는 테스트 코드를 통과하게 만들고, 그 이후 과감하게 프로덕션 코드를 개선하면 된다고 생각 함


### TDD 절차

1. 실패하는 테스트 코드 작성
2. 실패하는 테스트를 통과하는 코드 작성
3. 그 이후 리팩토링
  1. 제일 중요함. 리팩토링이 없다면 앞에 두 작업은 의미가 없음
4. 더이상 생각할 수 있는 테스트 케이스가 없다면 멈춤

### 원칙 & 팁

- 가장 단순하고 작성하기 쉬운 기능부터 테스트를 작성하기
  - 코드를 점진적으로 발전시킬 수 있음
- 최소한의 코드로 실패하는 테스트 코드를 성공하게 할 수 있게 (??)
- 테스트 코드가 구체화될수록 프로덕션 코드가 범용적으로 변한다.
- 테스트 메서드는 메서드명이 굉장히 길어질 수 있기 때문에 한글이나 snake case로 가독성을 높이는 것이 좋을 수 있음

### TDD의 잇점

- **Debugging Time**
  - TDD는 디버깅 시간을 1/10으로 줄여줄 수 있다.
  - 1/10이 아니라 1/2만 줄여도 의미가 있다.
  - 디버깅에 보내는 시간보다 코드가 동작하도록 하는데 시간을 보내야 한다.
  - 개발자로서 우리가 되어야 하는 모습은 디버깅 챔피언이 아니라 `좋은 설계를 갖는 코드를 작성하는 개발자`가 되는 것
- **Desing Documents**
  - TDD의 3가지 법칙을 잘 따르면 설계 문서를 얻게된다.
  - test는 low level의 design document이다.
- **Decoupling**
  - 테스트를 먼저 작성하면 Production 코드가 테스트 가능해진다.
  - 모든 코드 라인을 테스트하는 유일한 방법은 테스트 코드에서 그 코드들에 접근하는 것이다.
  - 그러나 테스트 코드에서 코드 라인을 접근하기 위한 유일한 방법은 테스트 하려는 코드를 다른 코드들과 decouple 시키는 것이다.
  - 프로덕션 코드보다 테스트 코드를 먼저 작성하게 되면 사용하기 편리한 코드를 작성하게 된다.
    - 테스트 하기 쉬운 코드 = 결합이 낮은 코드
    - 테스트 코드를 먼저 작성하면 자연스레 의존이 복잡하지 않은 코드가 작성이 됨
      - 클라이언트 입장에서 코드를 작성하기 때문
- **Courage to Change**
  - 개발자가 코드를 깨끗하게 리팩토링하는 것을 두려워하면 코드는 썩는다.
  - TEST가 존재하면 시스템이 정상적으로 동작하는 지 확인하기 쉽기 때문에 변경이 두렵지 않을 것이다.
  - 완벽한 설계에 기반해 개발을 했더라도 테스트가 없다면 코드를 clean하는데 두려움이 생길 것이다.
  - 내가 작성한 코드에서 버그가 발생했다면, 그 버그를 재현하는 테스트 코드를 작성하여라. 그러면 동일한 버그는 발생하지 않을 것이다.
- **Trust**
  - TAD(Test After Development)
    - 테스트를 신뢰할 수 없다.
    - 이미 수작업으로 테스트를 했기 때문에, 어떤 상황에서 코드가 동작하는지 안다.
      - 이미 알고있는 성공하는 케이스에 대해서만 테스트를 작성할 확률이 높다.
    - Short cut을 취하게 된다. (테스트 케이스가 풍부하지 않다)